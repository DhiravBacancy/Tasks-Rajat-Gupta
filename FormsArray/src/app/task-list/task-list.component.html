<mat-card class="list-card">
    <mat-card-header>
      <mat-card-title>Task List</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-form-field appearance="fill">
        <mat-label>Filter Tasks</mat-label>
        <mat-select [(ngModel)]="filter" (ngModelChange)="filterTasks()">
          <mat-option value="all">All</mat-option>
          <mat-option value="completed">Completed</mat-option>
          <mat-option value="pending">Pending</mat-option>
        </mat-select>
      </mat-form-field>
      @if (filteredTasks.length === 0) {
        <p class="no-tasks">No tasks added yet.</p>
      }
      @for (task of filteredTasks; track task; let i = $index) {
        <mat-card class="task-item">
          <mat-card-header>
            <mat-card-title>{{ task.title }}</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <p>{{ task.description }}</p>
            <h4>Subtasks:</h4>
            <ul>
              @for (subtask of task.subtasks; track subtask) {
                <li>
                  {{ subtask.subtaskName }} - {{ subtask.isCompleted ? 'Completed' : 'Pending' }} (Deadline: {{ subtask.deadline || 'None' }})
                </li>
              }
            </ul>
          </mat-card-content>
          <mat-card-actions>
            <button mat-raised-button color="primary" (click)="editTask(i)">Edit</button>
          </mat-card-actions>
        </mat-card>
      }
    </mat-card-content>
  </mat-card>